<html>

<head>
    <title>
        Bubbles
    </title>
    <script type="application/javascript">
        const TICK_MS = 20; // 50 FPS
        const FLOAT_SPEED = 0.6;
        let lastRender;

        const bubbles = [];
        addBubble(25);
        addBubble(50);

        function addBubble(targetValue) {
            bubbles.push({
                // Spawn at a random horizontal position, fully inside the viewport:
                "x": randomInRange(targetValue, window.innerWidth - targetValue),
                // Spawn just below the viewport:
                "y": window.innerHeight + targetValue,
                "r": targetValue,
                "fillStyle": fillFor(targetValue)
            });
        }

        function randomInRange(minInclusive, maxInclusive) {
            return Math.floor(Math.random() * (maxInclusive - minInclusive + 1) + minInclusive);
        }

        function fillFor(targetValue) {
            return "red";
        }

        function start() {
            window.requestAnimationFrame(render);
        }

        function render(timestamp) {
            if (lastRender === undefined) {
                lastRender = timestamp;
            }

            if (timestamp - lastRender > TICK_MS) {
                var canvas = document.getElementById("bubbles");
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;

                var ctx = canvas.getContext('2d');
                bubbles.forEach(function (bubble) {
                    bubble.y -= FLOAT_SPEED;
                    ctx.arc(bubble.x, bubble.y, bubble.r, 0, 2 * Math.PI, false);
                    ctx.fillStyle = bubble.fillStyle;
                    ctx.fill();
                });
            }

            window.requestAnimationFrame(render);
        }
    </script>
</head>

<body onload="start();">
    <canvas id="bubbles"></canvas>
</body>



</html>